<script>
function calcSalary() {
    const total = Number(document.getElementById('total').value || 0);
    const type = document.getElementById('salaryType').value;
    let master = 0;

    if (type === 'fixed') {
        master = Number(document.getElementById('fixedSalary').value || 0);
    } else {
        master = total * (type / 100);
    }

    document.getElementById('masterPay').innerText = master.toFixed(0);
    document.getElementById('companyPay').innerText = (total - master).toFixed(0);
}

function generate() {
    // –†–∞–±–æ—Ç–∞
    let work = [];
    if (document.getElementById('windowsSide').value) {
        let count = document.getElementById('windowsCount').value;
        let type = document.getElementById('windowsType').value;
        work.push(`–û–∫–Ω–∞: ${document.getElementById('windowsSide').value}, —Å—Ç–≤–æ—Ä–æ–∫ ${count || '?'}, ${type}`);
    }
    if (document.getElementById('dustCeiling').checked) work.push('–û–±–µ—Å–ø—ã–ª–∏–≤–∞–Ω–∏–µ –ø–æ—Ç–æ–ª–∫–∞');
    if (document.getElementById('dustWalls').checked) work.push('–û–±–µ—Å–ø—ã–ª–∏–≤–∞–Ω–∏–µ —Å—Ç–µ–Ω');
    if (document.getElementById('closets').checked) work.push(`–®–∫–∞—Ñ—ã: ${document.getElementById('closetsType').value}`);
    
    let tech = [...document.querySelectorAll('.tech:checked')].map(e => e.value);
    if (tech.length) work.push(`–¢–µ—Ö–Ω–∏–∫–∞: ${tech.join(', ')}`);

    if (document.getElementById('tiles').checked) work.push('–ö–∞—Ñ–µ–ª—å');
    if (document.getElementById('plumbing').checked) work.push('–°–∞–Ω—Ç–µ—Ö–Ω–∏–∫–∞');
    if (document.getElementById('shower').checked) work.push('–î—É—à–µ–≤–∞—è');
    if (document.getElementById('bath').checked) work.push('–í–∞–Ω–Ω–∞');

    // –û–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ
    let eqList = ['ladder','vacuum','steam','windowCleaner','bucket','mop','mopHolder'];
    let equipment = eqList.filter(id => document.getElementById(id).checked)
                          .map(id => document.getElementById(id).nextSibling.textContent.trim());

    // –•–∏–º–∏—è
    let chemList = ['universal','degasser','scaleRemover','sanitary','construction','antiscotch'];
    let chemistry = chemList.filter(id => document.getElementById(id).checked)
                            .map(id => document.getElementById(id).nextSibling.textContent.trim());

    // –°–±–æ—Ä –∏—Ç–æ–≥–æ–≤–æ–≥–æ —Ç–µ–∫—Å—Ç–∞
    let text = `üßπ –ó–ê–Ø–í–ö–ê –ù–ê –£–ë–û–†–ö–£

–í–∏–¥: ${type.value}
–î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è: ${datetime.value}
–ì–æ—Ä–æ–¥: ${city.value}
–ê–¥—Ä–µ—Å: ${address.value}
–ü–ª–æ—â–∞–¥—å: ${area.value} –º¬≤

–ó–∞–∫–∞–∑—á–∏–∫: ${client.value}
–¢–µ–ª–µ—Ñ–æ–Ω: ${phone.value}

üí∞ –§–∏–Ω–∞–Ω—Å—ã:
–û–±—â–∞—è —Å—É–º–º–∞: ${total.value} ‚ÇΩ
–ú–∞—Å—Ç–µ—Ä—É: ${masterPay.innerText} ‚ÇΩ

üìã –†–∞–±–æ—Ç—ã:
${work.join('\n')}

üõ† –û–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ: ${equipment.join(', ') || '–ù–µ —É–∫–∞–∑–∞–Ω–æ'}
üß¥ –•–∏–º–∏—è: ${chemistry.join(', ') || '–ù–µ —É–∫–∞–∑–∞–Ω–æ'}

–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π:
${comment.value || '–ù–µ—Ç'}
`;
    document.getElementById('output').innerText = text;
}

function copyText() {
    navigator.clipboard.writeText(document.getElementById('output').innerText);
    alert('–°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ');
}

function sendTelegram() {
    window.open(`https://t.me/share/url?text=${encodeURIComponent(document.getElementById('output').innerText)}`);
}

function sendWhatsApp() {
    window.open(`https://wa.me/?text=${encodeURIComponent(document.getElementById('output').innerText)}`);
}
</script>
